{% extends "base.html" %}
{% block content %}
{% load static %}
<div class="container">
    <h1>Configuration des alertes</h1>
    <form class="alerte" method="post">
        <div id="limite_tempinf_container">
            <h2>limite temp -</h2>
            <input type="number" step="0.5">
            <label>°C</label>
        </div>
        <div id="limite_tempsup_container">
            <h2>limite temp +</h2>
            <input type="number" step="0.5">
            <label>°C</label>
        </div>
        <div id="limite_huminf_container">
            <h2>limite hum -</h2>
            <input type="number" min="0" max="100">
            <label>%</label>
        </div>
        <div id="limite_humsup_container">
            <h2>limite hum -</h2>
            <input type="number" min="0" max="100">
            <label>%</label>
        </div>
        <div id="delai_container">
            <h2>delai entre les alertes mails</h2>
            <input type="number" min="0" max="180" step="5">
            <label>minutes</label>
        </div>
        <div id="mail_container">
            <h2>liste des destinataires</h2>
            <div>
                <article>
                    <input class='customLook' value='some.name@website.com'><button type="button">+</button>
                </article>
            </div>
        </div>
        <button type="submit" id="submit">Valider</button>
        <!--- commande post des données sur la bdd -->
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify"></script>
<script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.polyfills.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css" rel="stylesheet" type="text/css" />
<script>
    // generate random whilist items (for the demo)
var randomStringsArr = Array.apply(null, Array(100)).map(function() {
    return Array.apply(null, Array(~~(Math.random() * 10  + 3))).map(function() {
      return String.fromCharCode(Math.random() * (123 - 97) + 97)
    }).join('') + '@gmail.com'
  })
  
  var input = document.querySelector('.customLook'),
      tagify = new Tagify(input, {
        // email address validation (https://stackoverflow.com/a/46181/104380)
        pattern: /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
        whitelist: randomStringsArr,
        callbacks: {
          "invalid": onInvalidTag
        },
        dropdown : {
          position: 'text',
          enabled: 1 // show suggestions dropdown after 1 typed character
        }
      }),
      button = input.nextElementSibling;  // "add new tag" action-button
  
  button.addEventListener("click", onAddButtonClick)
  
  function onAddButtonClick(){
      tagify.addEmptyTag()
  }
  
  function onInvalidTag(e){
    console.log("invalid", e.detail)
  }
</script>
{% endblock %}